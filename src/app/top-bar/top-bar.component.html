<mat-toolbar class="mat-elevation-z4 top-bar" qaSticky>

  <div id="start">
    <button mat-icon-button aria-label="Example icon-button with menu icon" (click)="openDrawer.emit()">
      <qa-menu-icon></qa-menu-icon>
    </button>

    <a routerLink="/" class="logo-link">
      <span>İyidev</span>
     <!-- <sup>beta</sup>-->
    </a>
  </div>

  <span class="flex-spacer"></span>

  <div id="center">
    <qa-search-form></qa-search-form>
  </div>

  <span class="flex-spacer"></span>
  <ng-container *ngIf="isLoggedIn$ | async; else signIn">

    <div class="toolbar-profile-container">
      <div class="toolbar-end">
        <button mat-icon-button matTooltip="İncelemeler">
          <qa-rate-review-icon></qa-rate-review-icon>
        </button>

        <button mat-icon-button class="top-right-btn notification-button" aria-label="Bildirimler"
                matTooltip="Bildirimler"
                #notificationElement="cdkOverlayOrigin"
                cdkOverlayOrigin
                (click)="openNotifications()">
          <qa-notifications-icon matBadge="{{notificationCount | async}}"
                                 [matBadgeHidden]="(notificationCount | async) === 0"></qa-notifications-icon>
        </button>

        <ng-template
          cdkConnectedOverlay
          (overlayOutsideClick)="outsideClick()"
          [cdkConnectedOverlayScrollStrategy]="blockScrollStrategy"
          [cdkConnectedOverlayOpen]="popupOpened && popup == 'notification'"
          [cdkConnectedOverlayOrigin]="notificationElement">
          <qa-notification-list-popup></qa-notification-list-popup>
        </ng-template>

        <!--    <button mat-icon-button class="top-right-btn" matTooltip="Filtrele" (click)="openSheet.emit()">
              <qa-filter-list-icon></qa-filter-list-icon>
            </button>-->

        <button id="avatar-btn" aria-label="Alternatif hesapların listesini açan hesap profil fotoğrafı"
                #avatarElement="cdkOverlayOrigin" cdkOverlayOrigin matTooltip="{{user.displayName}}"
                (click)="openUsermenu()">
          <img class="avatar-img"
               src="https://lh3.googleusercontent.com/MZkX0bauoQ1cOM2JFBzwlt9TSFd_vSM71aftYJwtIaVieglnrFbhYwbdiIqyBjIjbVkxEMsvo2UAchXmAxyGLd2V6HfHebYWwGlEAw"
               alt="{{user.displayName}}">
        </button>

        <ng-template
          cdkConnectedOverlay
          (overlayOutsideClick)="outsideClick()"
          [cdkConnectedOverlayScrollStrategy]="blockScrollStrategy"
          [cdkConnectedOverlayOpen]="popupOpened && popup == 'avatar'"
          [cdkConnectedOverlayOrigin]="avatarElement">
          <ng-container [ngComponentOutlet]="compOutlet2"></ng-container>
        </ng-template>
      </div>
    </div>

  </ng-container>

</mat-toolbar>

<ng-template #signIn>
  <button mat-icon-button matTooltip="Ayarlar" class="top-right-btn more-vert-icon" [matMenuTriggerFor]="moreMenu">
    <qa-more-vert-icon></qa-more-vert-icon>
  </button>

  <mat-menu #moreMenu="matMenu" xPosition="before" class="text-only-menu">
    <ng-template matMenuContent>
      <button mat-menu-item>
        <span>Blog</span>
      </button>
      <button mat-menu-item>
        <span>Chat <sup>beta</sup></span>
      </button>
      <button mat-menu-item>
        <span>Hesap & ayarlar</span>
      </button>
      <button mat-menu-item>
        <span>Yardım</span>
      </button>
    </ng-template>
  </mat-menu>
  <a mat-button routerLink="/login">OTURUM AÇ</a>
</ng-template>

